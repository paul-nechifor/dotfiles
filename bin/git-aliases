#!/bin/bash

gs() {
  if git status &>/dev/null; then
    git s "$@"
  else
    svn-color st "$@"
  fi
}

gl() {
  if git status &>/dev/null; then
    git-pretty-log "$@"
  else
    svn-color log "$@"
  fi
}

gd() {
  separator —
  if git status &>/dev/null; then
    git diff -M "$@"
  else
    svn-color diff "$@"
  fi
}

gdd() {
  if git status &>/dev/null; then
    git-vimdiff "$@"
  else
    sdd "$@"
  fi
}

ga() {
  if git status &>/dev/null; then
    if [[ $# -eq 0 ]]; then
      git add --all .
    else
      git add --all "$@"
    fi
  else
    svn-color add "$@"
  fi
  gs .
}

gc() {
  local message="$*"
  if git status &>/dev/null; then
    git commit -m "$message"
    gl -n "$(( $(tput lines) - 5 ))"
  else
    svn-color ci -m "$message"
    svn up
    svn-color log
  fi
}

gpl() {
  if git status &>/dev/null; then
    git pull
  else
    svn-color up
  fi
}

g() {
  if git status &>/dev/null; then
    git "$@"
  else
    svn-color "$@"
  fi
}

gac() {
  git add --all
  gc "$@"
}

gdc() {
  separator —
  g diff --cached -M
}

alias gca="g c --amend"
alias gad="ga && gdc"
alias gg="gitg"
