#!/usr/bin/env python

import os
import sys
import time

project_file = sys.argv[1].replace('/', '-')[1:]
commands_dir = os.getenv('HOME') + '/.local-build-commands'

edit = len(sys.argv) > 2
opened = 0

for file in os.listdir(commands_dir):
    if project_file.startswith(file):
        if edit:
            os.system('vim ' + commands_dir + '/' + file)
            opened += 1
        else:
            os.system('bash ' + commands_dir + '/' + file)

if opened == 0:
    os.system('vim ' + commands_dir + '/' + project_file)

if edit:
    # Introduce a bit of delay.
    time.sleep(0.2)
